{% extends "base.html" %}
{% load humanize %}


{% block content%}
	<h2>{{ profile }}</h2>
	<hr>
	<br>
	{% for status in statutes %}
		<p>
			<h2>{{ status.profile.user.username }}</h2>
			<i>{{ status.date }}</i>
			<div class="status">{{ status }}</div>
		</p>
		<div class="border">
			{% if status.comment_set.all.count > 0 %}
				{% for comment in status.comment_set.all %}
					<p>
						{% if comment.author.username == profile.user.username %}
							<b>{{ comment.author.username }}</b> : {{ comment.content }}
						{% else %}
							<b>{{ comment.author.username }} -> {{ profile.user.username }}</b> : {{ comment.content }}</p>
						{% endif %}
						<br>
						<i>{{ comment.date|naturaltime }}</i>
					</p>
				{% endfor %}
			{% endif %}
			<div class="border">
				<form action="{% url "show_profile" profile.id  %}" method="post">
				    {% csrf_token %}
				    <input type="hidden" name="type_form" value="comment_status">
				    <input type="hidden" name="author" value="{{ profile.user.id }}">
				    <input type="hidden" name="status" value="{{ status.id }}">
				    {{ form.as_p }}
				    <input class="btn btn-primary" type="submit" value="Envoyer" />
				</form>
			</div>
		</div>
		<hr>
	{% endfor %}
		<br>
		<p>Laissez un statut sur ce profil : </p>
		<form action="{% url "show_profile" profile.id  %}" method="post">
		    {% csrf_token %}
		    <input type="hidden" name="type_form" value="profile_status">
		    <input type="hidden" name="author" value="{{ profile.user.id }}">
		    <input type="hidden" name="profile" value="{{ profile.id }}">
		    <p><input type="text" name="content" placeholder="Ajouter un status"></p>
		    <input class="btn btn-primary" type="submit" value="Envoyer" />
		</form>
{% endblock%}
